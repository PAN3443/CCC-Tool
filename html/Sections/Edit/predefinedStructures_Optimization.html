

<div id="predefinedStructures_Div" style="width:100%; height:100%;">
  <!----------- Constant ------------------->
  <div style="width:100%; height:auto; background: var(--main-sepArea-bg);">

    <div class="class_EditPage_closeDiv">
      <div  onclick="updateAddStructureStatus()">
        X
      </div>
    </div>

    <p style="width:100%; text-align:center; background: var(--menue-bg-color); border-top:0.1vh solid var(--main-sepArea-bg); color: var(--main-sepArea-font-color); box-sizing: border-box;">Constant Bands</p>

    <div id="id_EditPage_ConstBandDiv" style="width:100%; height:13vh; overflow-y:auto; display: inline-block; padding-top:1vh;">
    </div>

  </div>

  <!----------- Predefined CMS ------------------->
  <div style="width:100%; height:80vh; background: var(--main-sepArea-bg);">
    <p style="width:100%; text-align:center; background: var(--menue-bg-color); color: var(--main-sepArea-font-color);">Predefined CMS</p>
    <div class="class_TabRow">
      <button id="id_EditPage_Select_Predefined" onclick="switchPredefinedCMS(0)" style="height:100%; width:50%; cursor:pointer;">
        Predefined
      </button>
      <button id="id_EditPage_Select_MyDesigns" onclick="switchPredefinedCMS(1)" style="height:100%; width:50%; cursor:pointer;">
        MyDesigns
      </button>
    </div>

    <div id="id_EditPage_Predefined_Div" style="width:100%; height:76vh;">
      <div class="class_TabRow" style="width:100%;">
            <canvas id="id_EditPage_Preview_ScaledBrown" onclick="changeFilterPredefined(5)" style="width:14.28%;"></canvas>
            <canvas id="id_EditPage_Preview_ScaledBlue" onclick="changeFilterPredefined(4)" style="width:14.28%;"></canvas>
            <canvas id="id_EditPage_Preview_ScaledGreen" onclick="changeFilterPredefined(6)" style="width:14.28%;"></canvas>
            <canvas id="id_EditPage_Preview_ScaledRedPurple" onclick="changeFilterPredefined(7)" style="width:14.28%;"></canvas>
            <canvas id="id_EditPage_Preview_ScaledYellowOrange" onclick="changeFilterPredefined(8)" style="width:14.28%;"></canvas>
            <canvas id="id_EditPage_Preview_Divergent" onclick="changeFilterPredefined(2)" style="width:14.28%;"></canvas>
            <canvas id="id_EditPage_Preview_Multiband" onclick="changeFilterPredefined(1)" style="width:14.28%;"></canvas>
      </div>
      <div id="id_EditPage_Predefined_CMS_Div" style="width:100%; height:71vh; overflow-y: auto; padding-top:1vh;">
      </div>
    </div>

    <div id="id_EditPage_MyDesigns_CMS_Div" style="width:100%; height:74vh; overflow-y: auto; display:none; padding-top:1vh;">
    </div>

    <div id="id_EditPage_MyDesigns_EmptyDiv" style="width:100%; height:74vh; display:none;">
      <!--p class="subsectionLabel class_InsetLabelText" style="margin:auto; color:transparent;"> Empty </p-->
      <p style="margin:auto; color: var(--main-sepArea-font-color);"> Empty </p>
    </div>

  </div>
</div>






<div id="optimization_Div" style="width:100%; height:100%; background: var(--main-sepArea-bg); padding-top:5vh; display:none; y-overflow:auto;">

  <p class="sectionLabel" style="width:100%; margin:auto; ">Optimization</p>

  <hr>
  <div style="display:flex; width:100%;">
    <div class="helpButtonDiv" style="width:auto; margin:auto;">
      <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
      <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
        <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> <strong>Info</strong>: Check the wished optimization algorithm and set the respective degree of optimization.
          Move the slider to left to get the original CMS or move the slider to the right to get the optimized CMS.
          The order of the algorithm run depends on the respective degree. Algorithm with higher degree will be execute at least.
        </p>
      </div>
    </div>
  </div>

  <hr>

  <div id="id_EditPage_OptimizationSettings" style="width:100%;">
    <div style="width:100%; display:flex; margin-top:2vh; display:none;">
      <p style="margin:auto; margin-right:1vw; margin-left:2vw; color: var(--main-sepArea-font-color); font-weight:bold;">Delta-Sampling:</p>
      <input id="id_editPage_Optimization_IntervalCalcInput" type="number" min="0" step="any" style="margin: auto; max-width:8vw; min-width:8vw; margin-left:0vw;" >
    </div>

    <div style="width:100%; display:flex; margin-top:2vh;">
      <p style="margin:auto; margin-right:1vw; margin-left:1vw; color: var(--main-sepArea-font-color); font-weight:bold;">From </p>
      <select id="id_editPage_Optimization_FromKey" style="min-width:5vw; max-width:5vw;" onchange="updateKeyIndex()">

      </select>
      <p style="margin:auto; margin-right:1vw; margin-left:1vw; color: var(--main-sepArea-font-color); font-weight:bold;">To </p>
      <select id="id_editPage_Optimization_TillKey" style="min-width:5vw; max-width:5vw;" onchange="updateKeyIndex()">

      </select>
    </div>


    <hr style="color:var(--main-sepArea-font-color); margin-top:1vh; margin-bottom:1vh; width:95%; margin-left: 2.5%;">

    <p style="margin:auto; margin-right:1vw; margin-left:2vw; color: var(--main-sepArea-font-color); font-weight:bold; margin-bottom: 1vh;"></p>

    <div class="row">
    <label class="class_checkbox_container" style="margin-left:1vw; color: var(--main-sepArea-font-color); font-weight:bold; margin-right:0vw; margin-bottom: 1vh;"> : Perceptual Uniformity
      <input type="checkbox" id="id_EditPage_UniOpti_Check" onchange="updateOptiPageStyle()">
      <span class="class_checkbox_checkmark"></span>
    </label>

      <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
        <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
        <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
          <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Uniformity is the concept that perceived distances between colors are proportional to the distances of the values they represent
          </p>
        </div>
      </div>
    </div>

      <div id="id_EditPage_UniOpti_Options" style="width:100%;">

        <div class="row">
          <label class="class_radio_container" style="margin-left:2vw; color: var(--main-sepArea-font-color); width:9vw;"> : Local
            <input type="radio" checked="checked" name="selectUniformType" id="id_EditPage_LocalSpeedOptimization" onchange="updateOptiPageStyle()" checked>
            <span class="class_radio_checkmark"></span>
          </label>

          <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
            <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
            <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
              <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Local uniformity is achieved by relocating the control points. The key colors remain unchanged.
              </p>
            </div>
          </div>
        </div>

        <div class="row">
        <label class="class_radio_container" style="margin-left:2vw; color: var(--main-sepArea-font-color); width:9vw;" onchange="updateOptiPageStyle()"> : Global
          <input type="radio" name="selectUniformType" id="id_EditPage_GlobalSpeedOptimization" >
          <span class="class_radio_checkmark"></span>
        </label>
        <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
          <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
          <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
            <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Global uniformity is achieved by relocating the key colors. The optimum is a straight line.
            </p>
          </div>
        </div>
        </div>


        <div id="id_EditPage_UniOpti_GlobalTypesDiv" style="width:100%; display:flex;">
          <label class="class_radio_container" style="margin-left:4vw; color: var(--main-sepArea-font-color); margin-right:auto;"> : Linear Regression
            <input type="radio" checked="checked" name="selectGlobalUniformType" id="id_EditPage_GlobalLinearReg" onchange="updateOptiPageStyle()" checked>
            <span class="class_radio_checkmark"></span>
          </label>

          <label class="class_radio_container" style="margin-left:4vw; color: var(--main-sepArea-font-color); margin-right:auto;" onchange="updateOptiPageStyle()"> : Forced Graph
            <input type="radio" name="selectGlobalUniformType" id="id_EditPage_GlobalForcedGraph" >
            <span class="class_radio_checkmark"></span>
          </label>
        </div>

        <div id="id_EditPage_UniOpti_FixedDiv" style="width:100%;">
          <label class="class_checkbox_container" style="margin-left:6vw; color: var(--main-sepArea-font-color); margin-right:0vw;" onchange="updateOptiPageStyle()"> : fixed Start
            <input type="checkbox" id="id_EditPage_UniOpti_FixedStart" >
            <span class="class_checkbox_checkmark"></span>
          </label>
          <label class="class_checkbox_container" style="margin-left:6vw; color: var(--main-sepArea-font-color); margin-right:auto;" onchange="updateOptiPageStyle()"> : fixed End
            <input type="checkbox" id="id_EditPage_UniOpti_FixedEnd">
            <span class="class_checkbox_checkmark"></span>
          </label>
        </div>

        <div id="id_EditPage_UniOpti_GraphSettings" style="width:100%;">
          <div style="width:100%; display:flex;">
              <p style="color: var(--main-sepArea-font-color); margin-right:2vw; margin-left:6vw;">Iterations: </p> <input id="id_EditPage_UniOpti_Iterations" style="width:3vw;" type="number" name="quantity" min="1" value="5" step="1" onchange="calcOptiCMS()">
          </div>
        </div>

        <div class="row" style="width: 100%; margin-top: 1vh;">
          <p style="margin:auto; margin-left:2vw; margin-right:1vw; color: var(--main-sepArea-font-color);">Degree:</p>
          <input id="id_EditPage_UniOpti_Degree" type="range" step="0.01" min="0" max="1" value="1" style="width:10vw; margin:auto; margin-left:0vw;" onchange="calcOptiCMS()">
        </div>

      </div>

    <hr style="color:var(--main-sepArea-font-color); margin-top:1vh; margin-bottom:1vh; width:95%; margin-left: 2.5%;">

    <div class="row">
      <label class="class_checkbox_container" style="margin-left:1vw; color: var(--main-sepArea-font-color); font-weight:bold; margin-right:0vw; margin-bottom: 1vh; width:10vw;"> : Intrinsic Order
        <input type="checkbox" id="id_EditPage_IntOrderOpti_Check" onchange="updateOptiPageStyle()">
        <span class="class_checkbox_checkmark"></span>
      </label>

      <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
        <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
        <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
          <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Intrinsic Order means that an observer is able to order the colors the colormap traverses so that they can identify which values are higher or lower without ever seeing the color-bar.
          </p>
        </div>
      </div>
    </div>

    <div id="id_EditPage_IntOrderOpti_Options" style="width:100%;">
    <div class="row">
      <label class="class_radio_container" style="margin-left:2vw; color: var(--main-sepArea-font-color); margin-right:auto;"> : Local
        <input type="radio" name="selectOptimizationOrder" id="id_EditPage_LocalIntOrderOptimization" checked onchange="updateOptiPageStyle()">
        <span class="class_radio_checkmark"></span>
      </label>
      <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
        <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
        <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
          <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Local intrinsic order is achieved by moving the the middle of three consecutive key colors until it is closer to each of the outer ones than they are to each other.
          </p>
        </div>
      </div>
    </div>

    <div class="row">
      <label class="class_radio_container" style="margin-left:2vw; color: var(--main-sepArea-font-color); margin-right:auto;"> : Global
        <input type="radio" name="selectOptimizationOrder" id="id_EditPage_GlobalIntOrderOptimization"onchange="updateOptiPageStyle()" >
        <span class="class_radio_checkmark"></span>
      </label>
      <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
        <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
        <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
          <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Global intrinsic order are is achieved by moving the the middle of any combination of three key colors until it is closer to each of the outer ones than they are to each other.
          </p>
        </div>
      </div>
    </div>

      <div class="row" style="width: 100%; margin-top: 1vh;">
        <p style="margin:auto; margin-left:2vw; margin-right:1vw; color: var(--main-sepArea-font-color);">Degree:</p>
        <input id="id_EditPage_IntOrderOpti_Degree" type="range" step="0.01" min="0" max="1" value="1" style="width:10vw; margin:auto; margin-left:0vw;" onchange="calcOptiCMS()">
      </div>
    </div>

    <hr style="color:var(--main-sepArea-font-color); margin-top:1vh; margin-bottom:1vh; width:95%; margin-left: 2.5%;">

    <div class="row">
      <label class="class_checkbox_container" style="margin-left:1vw; color: var(--main-sepArea-font-color); font-weight:bold; margin-right:0vw; margin-bottom: 1vh;  width:10vw;"> : Legend-based Order
        <input type="checkbox" id="id_EditPage_LegOrderOpti_Check" onchange="updateOptiPageStyle()">
        <span class="class_checkbox_checkmark"></span>
      </label>

      <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
        <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
        <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
          <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Legend-based Order means that an observer is able to order the colors the colormap traverses so that they can identify which values are higher or lower while having the color bar at hand.
          </p>
        </div>
      </div>
    </div>

    <div id="id_EditPage_LegOrderOpti_Options" style="width:100%;">
      <div class="row">
        <label class="class_radio_container" style="margin-left:2vw; color: var(--main-sepArea-font-color); margin-right:auto;"> : Local
          <input type="radio" name="selectOptimizationLegOrder" id="id_EditPage_LocalLegOrderOptimization" checked onchange="updateOptiPageStyle()">
          <span class="class_radio_checkmark"></span>
        </label>
        <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
          <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
          <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
            <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Local legend-based order is achieved by removing possible repeating key colors.
            </p>
          </div>
        </div>
      </div>

      <div class="row">
        <label class="class_radio_container" style="margin-left:2vw; color: var(--main-sepArea-font-color); margin-right:auto;"> : Global
          <input type="radio" name="selectOptimizationLegOrder" id="id_EditPage_GlobalLegOrderOptimization"onchange="updateOptiPageStyle()" >
          <span class="class_radio_checkmark"></span>
        </label>
        <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
          <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
          <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
            <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Global legend-based order is achieved by moving colors away from each other that deceed the given minimal speed through the slider.
            </p>
          </div>
        </div>
      </div>

      <div style="width:100%; display:flex;">
          <p style="color: var(--main-sepArea-font-color); margin-right:2vw; margin-left:2vw;">Iterations: </p> <input id="id_EditPage_LegOrderOpti_Iterations" style="width:3vw;" type="number" name="quantity" min="1" value="2" step="1" onchange="calcOptiCMS()">
      </div>
      <div class="row" style="width: 100%; margin-top: 1vh;">
        <p style="margin:auto; margin-left:2vw; margin-right:1vw; color: var(--main-sepArea-font-color);">Speed:</p>

        <div>
          <input id="id_EditPage_LegOrderOpti_Speed" type="range" step="0.01" min="0" max="1" value="1" style="width:10vw; margin:auto; margin-left:0vw;" onchange="calcOptiCMS()">
          <div class="row" style="width:10vw; height:0.75vh;">
            <div id="id_EditPage_LegOrderOpti_NotNoticeableArea" style="height:100%; width:33%; background: var(--general-warning-color);"></div>
            <div id="id_EditPage_LegOrderOpti_NoChangeArea" style="height:100%; width:33%; background: var(--general-active-color);"></div>
            <div id="id_EditPage_LegOrderOpti_OkayArea" style="height:100%; width:34%; background: var(--main-sepArea-font-color);"></div>
          </div>
        </div>

      </div>


      <div class="row" style="width: 100%; margin-top: 1vh;">
        <p style="margin:auto; margin-left:2vw; margin-right:1vw; color: var(--main-sepArea-font-color);">Degree:</p>
        <input id="id_EditPage_LegOrderOpti_Degree" type="range" step="0.01" min="0" max="1" value="1" style="width:10vw; margin:auto; margin-left:0vw;" onchange="calcOptiCMS()">
      </div>

      <p id="id_EditPage_LegOrderOpti_Info" style="margin-top:0.5vh; margin-left:2vw; margin-right:2vw; visibility:hidden; color: var(--general-active-color);"><strong>Info</strong>: The minimal speed in the original CMS is over the notiveable border. Thereforce the legend based order doesn't need necessarily a optimization.</p>
      <p id="id_EditPage_LegOrderOpti_Warning" style="margin-top:0.5vh; margin-left:2vw; margin-right:2vw; visibility:hidden; color: var(--general-warning-color);"><strong>Warning</strong>: Your chosen value for the speed is below the notiveable color difference. </p>


    </div>

    <hr style="color:var(--main-sepArea-font-color); margin-top:1vh; margin-bottom:1vh; width:95%; margin-left: 2.5%;">

    <div class="row">
      <label class="class_checkbox_container" style="margin-left:1vw; color: var(--main-sepArea-font-color); font-weight:bold; margin-right:0vw; margin-bottom: 1vh; width:10vw;"> : Discriminative Power
        <input type="checkbox" id="id_EditPage_DisPowerOpti_Check" onchange="updateOptiPageStyle()">
        <span class="class_checkbox_checkmark"></span>
      </label>



      <div class="helpButtonDiv" style="width:auto; margin-left:1vw; margin-right:auto;">
        <button class="helpButton_sepArea" style="height: var(--line-height-normal); line-height: var(--line-height-normal); ">?</button>
        <div class="helpButtonDiv-content" style="width:40vw; z-index:103;">
          <p style="padding:1vh; height:auto; width:40vw; max-width:40vw; z-index:103; "> Discriminative power is described as the number of just noticeable differences (JNDs) that are traversed by the colormap.
              Local discriminative power is achieved through neighboring points repelling each other.
              Global discriminative power is achieved through all points repelling each other.
          </p>
        </div>
      </div>
    </div>

    <div id="id_EditPage_DisPowerOpti_Options" style="width:100%;">
      <div style="width:100%; display:flex;">
          <p style="color: var(--main-sepArea-font-color); margin-right:2vw; margin-left:2vw;">Iterations: </p> <input id="id_EditPage_DisPowerOpti_Iterations" style="width:3vw;" type="number" name="quantity" min="1" value="100" step="1" onchange="calcOptiCMS()">
      </div>

      <div class="row" style="width: 100%; margin-top: 1vh;">
        <p style="margin:auto; margin-left:2vw; margin-right:1vw; color: var(--main-sepArea-font-color);">Power:</p>
        <input id="id_EditPage_DisPowerOpti_Power" type="range" step="0.01" min="0" max="1" value="1" style="width:10vw; margin:auto; margin-left:0vw;" onchange="calcOptiCMS()">
      </div>

      <label class="class_checkbox_container" style="margin-left:2vw; color: var(--main-sepArea-font-color); font-weight:bold; margin-right:0vw; margin-bottom: 1vh; width:10vw;"> : All Node Connection
        <input type="checkbox" id="id_EditPage_DisPowerOpti_AllNodeConnection" onchange="calcOptiCMS()">
        <span class="class_checkbox_checkmark"></span>
      </label>

      <div class="row" style="width: 100%; margin-top: 1vh;">
        <p style="margin:auto; margin-left:2vw; margin-right:1vw; color: var(--main-sepArea-font-color);">Degree:</p>
        <input id="id_EditPage_DisPowerOpti_Degree" type="range" step="0.01" min="0" max="1" value="1" style="width:10vw; margin:auto; margin-left:0vw;" onchange="calcOptiCMS()">
      </div>
    </div>

    <!--hr style="color:var(--main-sepArea-font-color); margin-top:1vh; margin-bottom:1vh; width:95%; margin-left: 2.5%;">
    <label class="class_radio_container" style="margin-left:2vw; color: var(--main-sepArea-font-color); margin-right:auto;"> : Intrinsic Smoothness
      <input type="radio" name="selectOptimizationType" id="id_EditPage_IntrinsicSmoothnessOptimization"  disabled>
      <span class="class_radio_checkmark"></span>
    </label-->

    <hr style="color:var(--main-sepArea-font-color); margin-top:1vh; margin-bottom:1vh; width:95%; margin-left: 2.5%;">
    <p id="id_EditPage_OptimizationExOrder" style="margin-left:10%; margin-top:2vh; width: 80%; color: var(--main-sepArea-font-color); display:none;"></p>

  </div>

  <div id="id_EditPage_OptimizationWarning"  style="width:100%; height:100%; display:none;">
    <p style="margin:auto; width: 50%; color: var(--main-sepArea-font-color); font-weight:bold;">Please choose a perceptual analyzable colorspace for the interpolation.</p>
  </div>


</div>
